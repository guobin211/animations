(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"//Q6":function(t,n,e){},"/orP":function(t,n,e){},Pfb2:function(t,n,e){"use strict";e.r(n),e.d(n,"MCanvasModule",(function(){return x}));var c=e("ofXK"),a=e("tyNb"),s=e("ey9i"),i=e("fXoL"),o=e("amw9"),r=e("wZkO");const l=[[["",8,"ts"]],[["",8,"html"]],[["",8,"scss"]]],b=[".ts",".html",".scss"];let h=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-my-tabs"]],ngContentSelectors:b,decls:7,vars:0,consts:[["label","TypeScript"],["label","Html"],["label","Scss"]],template:function(t,n){1&t&&(i.fc(l),i.Ub(0,"mat-tab-group"),i.Ub(1,"mat-tab",0),i.ec(2),i.Tb(),i.Ub(3,"mat-tab",1),i.ec(4,1),i.Tb(),i.Ub(5,"mat-tab",2),i.ec(6,2),i.Tb(),i.Tb())},directives:[r.b,r.a],styles:[".mat-tab-group[_ngcontent-%COMP%]{height:calc(100vh - 220px)}"]}),t})();var v=e("UpbZ");const u=[{path:"",redirectTo:"canvas",pathMatch:"full"},{path:"canvas",component:(()=>{class t{constructor(){this.ts='\n@Component({\n  selector: "app-canvas",\n  templateUrl: "./canvas.component.html",\n  styleUrls: ["./canvas.component.scss"],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CanvasComponent implements AfterViewInit, OnDestroy {\n  private canvas: HTMLCanvasElement;\n  private ctx: CanvasContext;\n  private animate: number;\n  ts = ts;\n  html = html;\n\n  initCanvas(el: HTMLCanvasElement) {\n    this.canvas = el;\n    this.ctx = Context.initContext(el);\n  }\n\n  ngAfterViewInit(): void {\n    if (this.ctx) {\n      this.canvas.style.background = "#323232";\n      initAnimate(this.canvas, this.ctx, v => this.animate = v);\n    }\n  }\n\n  ngOnDestroy(): void {\n    window.cancelAnimationFrame(this.animate);\n  }\n}\n\nfunction initAnimate(canvas: HTMLCanvasElement, ctx: CanvasContext, callback: (v: number) => void) {\n  let speed = 0.1;\n  const rad = Math.PI * 2 / 100;\n  const w = ctx.width / 2;\n  const h = ctx.height / 2;\n\n  function drawFrame() {\n    const n = window.requestAnimationFrame(drawFrame);\n    callback(n);\n    ctx.ctx.clearRect(0, 0, ctx.width, ctx.height);\n    whiteCircle(ctx.ctx, w, h);\n    text(speed, ctx.ctx, w, h);\n    buildCircle(ctx.ctx, speed, w, h, rad);\n    if (speed > 100) {\n      speed = 0;\n    }\n    speed += 0.1;\n  }\n\n  drawFrame();\n}\n\nfunction text(n: number, context: CanvasRenderingContext2D, centerX: number, centerY: number) {\n  context.save();\n  context.strokeStyle = "#49f";\n  context.font = "40px Arial";\n  context.strokeText(n.toFixed(0) + "%", centerX - 25, centerY + 10);\n  context.stroke();\n  context.restore();\n}\n\nfunction whiteCircle(context: CanvasRenderingContext2D, centerX: number, centerY: number) {\n  context.save();\n  context.beginPath();\n  context.strokeStyle = "white";\n  context.arc(centerX, centerY, 100, 0, Math.PI * 2, false);\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\nfunction buildCircle(context: CanvasRenderingContext2D,\n                     n: number,\n                     centerX: number,\n                     centerY: number,\n                     rad: number) {\n  context.save();\n  context.beginPath();\n  context.strokeStyle = "#49f";\n  context.lineWidth = 5;\n  context.arc(centerX,\n    centerY,\n    100,\n    -Math.PI / 2,\n    -Math.PI / 2 + n * rad,\n    false);\n  context.stroke();\n  context.closePath();\n  context.restore();\n}\n\n',this.html='\n<div class="page">\n  <div class="title">\n    <h1>Canvas Detail</h1>\n  </div>\n  <div class="row">\n    <div class="col">\n      <lib-ngx-canvas (canvasInit)="initCanvas($event)"></lib-ngx-canvas>\n    </div>\n    <div class="col">\n      <app-my-tabs>\n        <lib-ngx-prism [code]="code" class="ts"></lib-ngx-prism>\n      </app-my-tabs>\n    </div>\n  </div>\n</div>\n'}initCanvas(t){this.canvas=t,this.ctx=s.Context.initContext(t)}ngAfterViewInit(){this.ctx&&(this.canvas.style.background="#323232",function(t,n,e){let c=.1;const a=2*Math.PI/100,s=n.width/2,i=n.height/2;!function t(){const o=window.requestAnimationFrame(t);var r,l,b;e(o),n.ctx.clearRect(0,0,n.width,n.height),l=s,b=i,(r=n.ctx).save(),r.beginPath(),r.strokeStyle="white",r.arc(l,b,100,0,2*Math.PI,!1),r.stroke(),r.closePath(),r.restore(),function(t,n,e,c){n.save(),n.strokeStyle="#49f",n.font="40px Arial",n.strokeText(t.toFixed(0)+"%",e-25,c+10),n.stroke(),n.restore()}(c,n.ctx,s,i),function(t,n,e,c,a){t.save(),t.beginPath(),t.strokeStyle="#49f",t.lineWidth=5,t.arc(e,c,100,-Math.PI/2,-Math.PI/2+n*a,!1),t.stroke(),t.closePath(),t.restore()}(n.ctx,c,s,i,a),c>100&&(c=0),c+=.1}()}(0,this.ctx,t=>this.animate=t))}ngOnDestroy(){window.cancelAnimationFrame(this.animate)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-canvas"]],decls:11,vars:2,consts:[[1,"page"],[1,"title"],[1,"row"],[1,"col"],[3,"canvasInit"],[1,"ts",3,"code"],[1,"html",3,"code"]],template:function(t,n){1&t&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"h1"),i.tc(3,"Canvas Detail"),i.Tb(),i.Tb(),i.Ub(4,"div",2),i.Ub(5,"div",3),i.Ub(6,"lib-ngx-canvas",4),i.bc("canvasInit",(function(t){return n.initCanvas(t)})),i.Tb(),i.Tb(),i.Ub(7,"div",3),i.Ub(8,"app-my-tabs"),i.Sb(9,"lib-ngx-prism",5),i.Sb(10,"lib-ngx-prism",6),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&t&&(i.Hb(9),i.gc("code",n.ts),i.Hb(1),i.gc("code",n.html))},directives:[o.a,h,v.a],styles:[""],changeDetection:0}),t})()},{path:"context",component:(()=>{class t extends class{constructor(){this.initCanvas=t=>{this.canvas=t,this.ctx=s.Context.initContext(t)}}}{constructor(){super(),this.code=""}ngAfterViewInit(){}ngOnDestroy(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-canvas-context"]],features:[i.Eb],decls:6,vars:0,consts:[[1,"row"],[1,"col"],[3,"canvasInit"],[1,"col","one-screen"]],template:function(t,n){1&t&&(i.Ub(0,"p"),i.tc(1,"Canvas Context \u56fe\u5f62\u7ed8\u5236\u4e0a\u4e0b\u6587"),i.Tb(),i.Ub(2,"div",0),i.Ub(3,"div",1),i.Ub(4,"lib-ngx-canvas",2),i.bc("canvasInit",(function(t){return n.initCanvas(t)})),i.Tb(),i.Tb(),i.Sb(5,"div",3),i.Tb())},directives:[o.a],styles:[""]}),t})()},{path:"renderer",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-canvas-renderer"]],decls:2,vars:0,template:function(t,n){1&t&&(i.Ub(0,"p"),i.tc(1,"canvas-renderer works!"),i.Tb())},styles:[""]}),t})()},{path:"webgl",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-canvas-web-gl"]],decls:2,vars:0,template:function(t,n){1&t&&(i.Ub(0,"p"),i.tc(1,"canvas-web-gl works!"),i.Tb())},styles:[""]}),t})()},{path:"image",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-canvas-image"]],decls:2,vars:0,template:function(t,n){1&t&&(i.Ub(0,"p"),i.tc(1,"canvas-image works!"),i.Tb())},styles:[""]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(n){return new(n||t)},imports:[[a.c.forChild(u)],a.c]}),t})();var p=e("PCNd");let x=(()=>{class t{}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(n){return new(n||t)},imports:[[c.b,d,p.a]]}),t})()},RlqQ:function(t,n){},T07Q:function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));class c{static initContext(t){const n=window.devicePixelRatio||1,e=t.getBoundingClientRect();t.width=e.width*n,t.height=e.height*n;const c=t.getContext("2d");return c.scale(n,n),{ctx:c,dpr:n,width:t.width,height:t.height,start:{x:0,y:0},end:{x:t.width,y:t.height}}}}},ey9i:function(t,n,e){"use strict";e("yLn8");var c=e("T07Q");e.d(n,"Context",(function(){return c.a})),e("/orP"),e("//Q6"),e("j4Pg")},j4Pg:function(t,n,e){"use strict";e("RlqQ"),e("ozUi")},ozUi:function(t,n){},yLn8:function(t,n,e){}}]);